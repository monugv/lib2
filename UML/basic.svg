<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="773px" preserveAspectRatio="none" style="width:700px;height:773px;background:#FFFFFF;" version="1.1" viewBox="0 0 700 773" width="700px" zoomAndPan="magnify"><defs><filter height="300%" id="f19auerm2z2qup" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f19auerm2z2qup)" height="415.0371" style="stroke:#A80036;stroke-width:1.0;" width="10" x="357.5" y="265.3516"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="88.4883" y2="689.3887"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="124" x2="124" y1="88.4883" y2="689.3887"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="362.5" x2="362.5" y1="88.4883" y2="689.3887"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="530.5" x2="530.5" y1="88.4883" y2="689.3887"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="606.5" x2="606.5" y1="88.4883" y2="689.3887"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="665.5" x2="665.5" y1="88.4883" y2="689.3887"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="85.5352">User</text><ellipse cx="23.5" cy="15" fill="#FEFECE" filter="url(#f19auerm2z2qup)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,23 L23.5,50 M10.5,31 L36.5,31 M23.5,50 L10.5,65 M23.5,50 L36.5,65 " fill="none" filter="url(#f19auerm2z2qup)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="701.9238">User</text><ellipse cx="23.5" cy="714.877" fill="#FEFECE" filter="url(#f19auerm2z2qup)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,722.877 L23.5,749.877 M10.5,730.877 L36.5,730.877 M23.5,749.877 L10.5,764.877 M23.5,749.877 L36.5,764.877 " fill="none" filter="url(#f19auerm2z2qup)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="92" y="85.5352">Web app</text><ellipse cx="124.5" cy="56" fill="#FEFECE" filter="url(#f19auerm2z2qup)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="112.5" x2="136.5" y1="70" y2="70"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="92" y="701.9238">Web app</text><ellipse cx="124.5" cy="720.877" fill="#FEFECE" filter="url(#f19auerm2z2qup)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="112.5" x2="136.5" y1="734.877" y2="734.877"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="337.5" y="85.5352">IMSLib</text><ellipse cx="362.5" cy="56" fill="#FEFECE" filter="url(#f19auerm2z2qup)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="350.5" x2="374.5" y1="70" y2="70"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="337.5" y="701.9238">IMSLib</text><ellipse cx="362.5" cy="720.877" fill="#FEFECE" filter="url(#f19auerm2z2qup)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="350.5" x2="374.5" y1="734.877" y2="734.877"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="488.5" y="85.5352">IMSLib CDN</text><path d="M510,44 L510,68 M510,56 L527,56 " fill="none" filter="url(#f19auerm2z2qup)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="539" cy="56" fill="#FEFECE" filter="url(#f19auerm2z2qup)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="488.5" y="701.9238">IMSLib CDN</text><path d="M510,708.877 L510,732.877 M510,720.877 L527,720.877 " fill="none" filter="url(#f19auerm2z2qup)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="539" cy="720.877" fill="#FEFECE" filter="url(#f19auerm2z2qup)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="592" y="85.5352">IMS</text><path d="M586.5,44 L586.5,68 M586.5,56 L603.5,56 " fill="none" filter="url(#f19auerm2z2qup)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="615.5" cy="56" fill="#FEFECE" filter="url(#f19auerm2z2qup)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="592" y="701.9238">IMS</text><path d="M586.5,708.877 L586.5,732.877 M586.5,720.877 L603.5,720.877 " fill="none" filter="url(#f19auerm2z2qup)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="615.5" cy="720.877" fill="#FEFECE" filter="url(#f19auerm2z2qup)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="652" y="85.5352">API</text><path d="M645.5,44 L645.5,68 M645.5,56 L662.5,56 " fill="none" filter="url(#f19auerm2z2qup)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="674.5" cy="56" fill="#FEFECE" filter="url(#f19auerm2z2qup)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="652" y="701.9238">API</text><path d="M645.5,708.877 L645.5,732.877 M645.5,720.877 L662.5,720.877 " fill="none" filter="url(#f19auerm2z2qup)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="674.5" cy="720.877" fill="#FEFECE" filter="url(#f19auerm2z2qup)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FFFFFF" filter="url(#f19auerm2z2qup)" height="415.0371" style="stroke:#A80036;stroke-width:1.0;" width="10" x="357.5" y="265.3516"/><polygon fill="#A80036" points="112.5,115.7988,122.5,119.7988,112.5,123.7988,116.5,119.7988" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="118.5" y1="119.7988" y2="119.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="30.5" y="115.0566">load app</text><line style="stroke:#A80036;stroke-width:1.0;" x1="124.5" x2="166.5" y1="164.4199" y2="164.4199"/><line style="stroke:#A80036;stroke-width:1.0;" x1="166.5" x2="166.5" y1="164.4199" y2="177.4199"/><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="166.5" y1="177.4199" y2="177.4199"/><polygon fill="#A80036" points="135.5,173.4199,125.5,177.4199,135.5,181.4199,131.5,177.4199" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="131.5" y="144.3672">define window.adobeid</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="131.5" y="159.6777">(IMSLib configuration)</text><polygon fill="#A80036" points="518.5,202.7305,528.5,206.7305,518.5,210.7305,522.5,206.7305" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="124.5" x2="524.5" y1="206.7305" y2="206.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="131.5" y="201.9883">load imslib</text><polygon fill="#A80036" points="135.5,232.041,125.5,236.041,135.5,240.041,131.5,236.041" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="129.5" x2="529.5" y1="236.041" y2="236.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="141.5" y="231.2988">loaded</text><polygon fill="#A80036" points="345.5,261.3516,355.5,265.3516,345.5,269.3516,349.5,265.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="124.5" x2="351.5" y1="265.3516" y2="265.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="131.5" y="260.6094">script loaded</text><line style="stroke:#A80036;stroke-width:1.0;" x1="367.5" x2="409.5" y1="294.6621" y2="294.6621"/><line style="stroke:#A80036;stroke-width:1.0;" x1="409.5" x2="409.5" y1="294.6621" y2="307.6621"/><line style="stroke:#A80036;stroke-width:1.0;" x1="368.5" x2="409.5" y1="307.6621" y2="307.6621"/><polygon fill="#A80036" points="378.5,303.6621,368.5,307.6621,378.5,311.6621,374.5,307.6621" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="374.5" y="289.9199">initialize</text><polygon fill="#A80036" points="595,332.9727,605,336.9727,595,340.9727,599,336.9727" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="367.5" x2="601" y1="336.9727" y2="336.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="374.5" y="332.2305">/check/v6/token</text><polygon fill="#A80036" points="378.5,362.2832,368.5,366.2832,378.5,370.2832,374.5,366.2832" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="372.5" x2="606" y1="366.2832" y2="366.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="384.5" y="361.541">token and profile</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="367.5" x2="409.5" y1="410.9043" y2="410.9043"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="409.5" x2="409.5" y1="410.9043" y2="423.9043"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="368.5" x2="409.5" y1="423.9043" y2="423.9043"/><polygon fill="#A80036" points="378.5,419.9043,368.5,423.9043,378.5,427.9043,374.5,423.9043" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="374.5" y="390.8516">store token and profile</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="374.5" y="406.1621">in session storage</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="367.5" x2="409.5" y1="453.2148" y2="453.2148"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="409.5" x2="409.5" y1="453.2148" y2="466.2148"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="368.5" x2="409.5" y1="466.2148" y2="466.2148"/><polygon fill="#A80036" points="378.5,462.2148,368.5,466.2148,378.5,470.2148,374.5,466.2148" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="374.5" y="448.4727">setup auto-refresh</text><polygon fill="#A80036" points="135.5,491.5254,125.5,495.5254,135.5,499.5254,131.5,495.5254" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="129.5" x2="356.5" y1="495.5254" y2="495.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="141.5" y="490.7832">onReady()</text><polygon fill="#A80036" points="345.5,520.8359,355.5,524.8359,345.5,528.8359,349.5,524.8359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="124.5" x2="351.5" y1="524.8359" y2="524.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="131.5" y="520.0938">getProfile:Promise&lt;profile&gt;</text><polygon fill="#A80036" points="135.5,550.1465,125.5,554.1465,135.5,558.1465,131.5,554.1465" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="129.5" x2="356.5" y1="554.1465" y2="554.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="141.5" y="549.4043">return profile from storage</text><polygon fill="#A80036" points="34.5,579.457,24.5,583.457,34.5,587.457,30.5,583.457" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="123.5" y1="583.457" y2="583.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="40.5" y="578.7148">hello {name}</text><polygon fill="#A80036" points="345.5,608.7676,355.5,612.7676,345.5,616.7676,349.5,612.7676" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="124.5" x2="351.5" y1="612.7676" y2="612.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="131.5" y="608.0254">getAccessToken:TokenInfo</text><polygon fill="#A80036" points="135.5,638.0781,125.5,642.0781,135.5,646.0781,131.5,642.0781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="129.5" x2="356.5" y1="642.0781" y2="642.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="141.5" y="637.3359">return access token from storage</text><polygon fill="#A80036" points="654,667.3887,664,671.3887,654,675.3887,658,671.3887" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="124.5" x2="660" y1="671.3887" y2="671.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270" x="131.5" y="666.6465">POST | Authorization: Bearer {accessToken}</text><!--MD5=[687dca46c1871af3db57cbe2d8df5df7]
@startuml
actor User as u
entity "Web app" as b
entity IMSLib as l
boundary "IMSLib CDN" as cdn
boundary IMS as i
boundary API as api

u -> b: load app
b -> b: define window.adobeid\n(IMSLib configuration)
b -> cdn: load imslib
cdn - -> b: loaded
b - -> l: script loaded
activate l
l -> l: initialize
l -> i: /check/v6/token
i - -> l: token and profile
l - -> l: store token and profile\nin session storage
l - -> l: setup auto-refresh
l - -> b: onReady()
b -> l: getProfile:Promise<profile>
l - -> b: return profile from storage
b - -> u: hello {name}
b -> l: getAccessToken:TokenInfo
l - -> b: return access token from storage
b -> api: POST | Authorization: Bearer {accessToken}
@enduml

PlantUML version 1.2022.0(Tue Jan 11 18:16:42 EET 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>